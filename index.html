<<<<<<< SEARCH
// --- НОВАЯ ФУНКЦИЯ ДЛЯ ВЫЗОВА ИИ ---
async function processInformationalTextAI(userInput) {
    // ВНИМАНИЕ: Хранение API-ключа на стороне клиента (в браузере) небезопасно!
    // В реальном приложении этот вызов должен быть заменен на обращение к вашему собственному
    // серверному бэкенду, который будет безопасно хранить ключ и делать запросы к API ИИ.
    // Этот код предназначен только для демонстрации и локального использования.
    const apiKey = 'YOUR_API_KEY'; // Замени на реальный ключ
    const apiUrl = 'YOUR_API_URL'; // Замени на реальный URL

    // Жесткий промпт находится здесь
    const prompt = `
Твоя роль - юрист-методолог, специализирующийся на составлении дополнительных соглашений к договорам страхования.
ЗАДАЧА: Преобразуй неформальный текст от пользователя в один, юридически грамотный и стилистически выверенный пункт для дополнительного соглашения.
ПРАВИЛА:
1.  Сохрани ключевой смысл текста пользователя.
2.  Используй исключительно официальный, деловой стиль и формулировки: "Стороны договорились...", "Внести изменения в части...", "Считать верными следующие реквизиты...".
3.  Текст на выходе должен быть ОДНИМ цельным абзацем.
4.  Не добавляй нумерацию пункта.
5.  Не задавай вопросов и не оставляй комментариев. Выдай только готовый текст пункта.

ПРИМЕР 1:
- Входной текст: "поменялся адрес страхователя теперь он живет на абая 5"
- Результат: "Стороны договорились внести изменения в реквизиты Страхователя, а именно в графу «Адрес», и считать ее верной в следующей редакции: г. Алматы, пр. Абая, д. 5."

ПРИМЕР 2:
- Входной текст: "ошиблись в марке машины в договоре. не камри а королла"
- Результат: "Стороны договорились внести изменения в Приложение №1 к Договору, а именно в данные о марке/модели застрахованного транспортного средства, и считать верным следующее наименование: Toyota Corolla."

ИСХОДНЫЙ ТЕКСТ ОТ ПОЛЬЗОВАТЕЛЯ:
"${userInput}"

ГОТОВЫЙ ПУНКТ СОГЛАШЕНИЯ:`;

    // Здесь должен быть твой код для вызова API (например, через fetch)
    // Это только пример, адаптируй его под свою модель
    const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
            prompt: prompt,
            max_tokens: 250,
            temperature: 0.3
        })
    });

    if (!response.ok) {
        throw new Error(`Ошибка API: ${response.statusText}`);
    }

    const data = await response.json();
    // Путь к тексту может отличаться в зависимости от ответа API
    return data.choices[0].text.trim();
}
=======
// --- НОВАЯ ФУНКЦИЯ ДЛЯ ВЫЗОВА ИИ ---
async function processInformationalTextAI(userInput) {
    // ВНИМАНИЕ: Хранение API-ключа на стороне клиента (в браузере) небезопасно!
    // В реальном приложении этот вызов должен быть заменен на обращение к вашему собственному
    // серверному бэкенду, который будет безопасно хранить ключ и делать запросы к API ИИ.
    // Этот код предназначен только для демонстрации и локального использования.
    const apiKey = 'СЮДА_ВСТАВЬТЕ_ВАШ_GEMINI_API_KEY'; // <--- ЗАМЕНИТЕ ЭТО

    // URL для модели Gemini Pro
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`;

    // Жесткий промпт находится здесь
    const prompt = `
Твоя роль - юрист-методолог, специализирующийся на составлении дополнительных соглашений к договорам страхования.
ЗАДАЧА: Преобразуй неформальный текст от пользователя в один, юридически грамотный и стилистически выверенный пункт для дополнительного соглашения.
ПРАВИЛА:
1.  Сохрани ключевой смысл текста пользователя.
2.  Используй исключительно официальный, деловой стиль и формулировки: "Стороны договорились...", "Внести изменения в части...", "Считать верными следующие реквизиты...".
3.  Текст на выходе должен быть ОДНИМ цельным абзацем.
4.  Не добавляй нумерацию пункта.
5.  Не задавай вопросов и не оставляй комментариев. Выдай только готовый текст пункта.

ПРИМЕР 1:
- Входной текст: "поменялся адрес страхователя теперь он живет на абая 5"
- Результат: "Стороны договорились внести изменения в реквизиты Страхователя, а именно в графу «Адрес», и считать ее верной в следующей редакции: г. Алматы, пр. Абая, д. 5."

ПРИМЕР 2:
- Входной текст: "ошиблись в марке машины в договоре. не камри а королла"
- Результат: "Стороны договорились внести изменения в Приложение №1 к Договору, а именно в данные о марке/модели застрахованного транспортного средства, и считать верным следующее наименование: Toyota Corolla."

ИСХОДНЫЙ ТЕКСТ ОТ ПОЛЬЗОВАТЕЛЯ:
"${userInput}"

ГОТОВЫЙ ПУНКТ СОГЛАШЕНИЯ:`;

    // Структура запроса для Gemini отличается
    const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            "contents": [{
                "parts":[{
                    "text": prompt
                }]
            }]
        })
    });

    if (!response.ok) {
        throw new Error(`Ошибка API: ${response.statusText}`);
    }

    const data = await response.json();
    // Путь к тексту для Gemini тоже другой
    return data.candidates[0].content.parts[0].text.trim();
}
>>>>>>> REPLACE